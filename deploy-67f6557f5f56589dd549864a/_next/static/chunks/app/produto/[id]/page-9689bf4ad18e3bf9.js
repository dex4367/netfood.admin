(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{6053:(e,t,s)=>{Promise.resolve().then(s.bind(s,8212))},7488:(e,t,s)=>{"use strict";s.r(t),s.d(t,{CartProvider:()=>c,useCart:()=>o});var r=s(122),a=s(7362);let l="bob_cart_items_v4",i=(0,a.createContext)(void 0);function d(){try{["bob_cart_items_v3","bob_cart_items_v2","cartItems","bobsCart"].forEach(e=>{try{localStorage.removeItem(e)}catch(t){console.error("Erro ao remover chave antiga ".concat(e,":"),t)}});let e=localStorage.getItem(l);if(!e)return[];let t=JSON.parse(e);if(!Array.isArray(t))return[];return t}catch(e){return console.error("Erro ao carregar carrinho:",e),[]}}function n(e){try{0===e.length?localStorage.removeItem(l):localStorage.setItem(l,JSON.stringify(e))}catch(e){console.error("Erro ao salvar carrinho:",e)}}function o(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useCart deve ser usado dentro de um CartProvider");return e}function c(e){let{children:t}=e,[s,o]=(0,a.useState)(!1),[c,x]=(0,a.useState)([]);(0,a.useEffect)(()=>{x(d()),o(!0);let e=()=>{x(d())};return window.addEventListener("storage",e),window.addEventListener("cart:updated",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("cart:updated",e)}},[]);let m=(0,a.useCallback)(e=>{let t;if(!e)return;let s=d(),r=s.findIndex(t=>t.id===e.id&&t.selectedSide===e.selectedSide&&JSON.stringify(t.selectedExtras)===JSON.stringify(e.selectedExtras)&&JSON.stringify(t.selectedSauces)===JSON.stringify(e.selectedSauces)&&JSON.stringify(t.selectedAddons)===JSON.stringify(e.selectedAddons)&&t.observation===e.observation);if(-1!==r){let a=(t=[...s])[r];t[r]={...a,quantity:a.quantity+e.quantity,totalPrice:a.totalPrice+e.totalPrice}}else t=[...s,{...e,id:e.id||"".concat(e.product.id,"-").concat(Date.now())}];n(t),x(t),window.dispatchEvent(new CustomEvent("cart:updated"))},[]),h=(0,a.useCallback)(e=>{let t=d().filter(t=>t.id!==e);n(t),x(t),window.dispatchEvent(new CustomEvent("cart:updated"))},[]),u=(0,a.useCallback)((e,t)=>{let s=d().map(s=>s.id===e?{...t,id:e}:s);n(s),x(s),window.dispatchEvent(new CustomEvent("cart:updated"))},[]),v=(0,a.useCallback)((e,t)=>{if(t<1){h(e);return}let s=d().map(s=>{if(s.id===e){let e=s.totalPrice/s.quantity;return{...s,quantity:t,totalPrice:e*t}}return s});n(s),x(s),window.dispatchEvent(new CustomEvent("cart:updated"))},[h]),b=(0,a.useCallback)(()=>{localStorage.removeItem(l),x([]),window.dispatchEvent(new CustomEvent("cart:updated"))},[]),f=(0,a.useCallback)(()=>d().reduce((e,t)=>e+t.totalPrice,0),[]),p=(0,a.useCallback)(()=>d().reduce((e,t)=>e+t.quantity,0),[]);return(0,r.jsx)(i.Provider,{value:{items:c,addItem:m,removeItem:h,updateItem:u,updateItemQuantity:v,clearCart:b,getTotalPrice:f,getTotalItems:p},children:t})}},8212:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var r=s(122),a=s(7362),l=s(2811),i=s(8591),d=s.n(i),n=s(7488);function o(e){let{product:t,editData:s}=e,[i,o]=(0,a.useState)((null==s?void 0:s.quantity)||1),[c,x]=(0,a.useState)((null==s?void 0:s.side)||null),[m,h]=(0,a.useState)((null==s?void 0:s.extras)||{}),[u,v]=(0,a.useState)((null==s?void 0:s.sauces)||{}),[b,f]=(0,a.useState)((null==s?void 0:s.addons)||[]),[p,g]=(0,a.useState)(""),[j,w]=(0,a.useState)(!1),{addItem:N,updateItem:y}=(0,n.useCart)(),C=e=>{h(t=>({...t,[e]:(t[e]||0)+1}))},E=e=>{h(t=>{let s=t[e]||0;if(s<=1){let s={...t};return delete s[e],s}return{...t,[e]:s-1}})},S=e=>{v(t=>({...t,[e]:(t[e]||0)+1}))},k=e=>{v(t=>{let s=t[e]||0;if(s<=1){let s={...t};return delete s[e],s}return{...t,[e]:s-1}})},_=e=>{b.includes(e)?f(t=>t.filter(t=>t!==e)):f(t=>[...t,e])},R=()=>{if(!t)return 0;let e=t.price;if(t.extras&&t.extras.forEach(t=>{let s=m[t.id]||0;s>0&&(e+=t.price*s)}),c&&t.sides){let s=t.sides.find(e=>e.id===c);s&&(e+=s.price)}return t.sauces&&t.sauces.forEach(t=>{let s=u[t.id]||0;s>0&&(e+=t.price*s)}),e*=i};return(0,r.jsxs)("div",{className:"container max-w-2xl mx-auto pb-20",children:[(0,r.jsx)("header",{className:"sticky top-0 bg-white z-10",children:(0,r.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,r.jsxs)("div",{className:"flex items-center h-16 px-4",children:[(0,r.jsx)(d(),{href:"/",className:"flex items-center mr-auto",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5 text-bobs-red",children:(0,r.jsx)("path",{d:"M15 18l-6-6 6-6"})})}),(0,r.jsx)("h1",{className:"font-bold text-[14px] absolute left-1/2 transform -translate-x-1/2 uppercase",children:t.name})]})})}),(0,r.jsx)("div",{className:"w-full h-64 relative",children:(0,r.jsx)(l.default,{src:t.image,alt:t.name,fill:!0,className:"object-cover",priority:!0})}),(0,r.jsxs)("div",{className:"px-4 pt-4 pb-3 border-b",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:t.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:t.description}),(0,r.jsxs)("div",{className:"text-xl font-bold text-bobs-red",children:["R$ ",t.price.toFixed(2).replace(".",",")]})]}),"Bebidas"!==t.category&&"Sobremesas"!==t.category&&(0,r.jsxs)(r.Fragment,{children:[t.extras&&t.extras.length>0&&(0,r.jsxs)("div",{className:"border-b",children:[(0,r.jsxs)("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-100",children:[(0,r.jsx)("h3",{className:"font-bold text-bobs-red",children:"Extras"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Personalize seu lanche"})]}),(0,r.jsx)("div",{className:"divide-y divide-gray-100",children:t.extras.map(e=>{let t=m[e.id]||0;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center pr-3",children:[e.image&&(0,r.jsx)("div",{className:"h-14 w-14 relative mr-3 bg-gray-50 rounded-lg overflow-hidden flex-shrink-0",children:(0,r.jsx)(l.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-800 text-sm",children:e.name}),e.description&&(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.description}),(0,r.jsxs)("p",{className:"text-sm text-bobs-red mt-1",children:["+R$ ",e.price.toFixed(2).replace(".",",")]})]})]}),(0,r.jsx)("div",{className:"flex items-center",children:t>0?(0,r.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-full p-1",children:[(0,r.jsx)("button",{className:"w-7 h-7 rounded-full text-bobs-red flex items-center justify-center",onClick:()=>E(e.id),children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),(0,r.jsx)("span",{className:"px-3 font-medium text-sm",children:t}),(0,r.jsx)("button",{className:"w-7 h-7 rounded-full text-bobs-red flex items-center justify-center",onClick:()=>C(e.id),children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})})]}):(0,r.jsx)("button",{onClick:()=>C(e.id),className:"w-7 h-7 rounded-full border border-bobs-red text-bobs-red flex items-center justify-center flex-shrink-0 transition-colors hover:bg-bobs-red hover:text-white",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})})})})]},e.id)})})]}),t.sides&&t.sides.length>0&&(0,r.jsxs)("div",{className:"border-b",children:[(0,r.jsxs)("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-100",children:[(0,r.jsx)("h3",{className:"font-bold text-bobs-red",children:"Acompanhamentos"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Escolha um acompanhamento"})]}),(0,r.jsx)("div",{className:"divide-y divide-gray-100",children:t.sides.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>x(e.id),children:[(0,r.jsxs)("div",{className:"flex items-center pr-3",children:[e.image&&(0,r.jsx)("div",{className:"h-14 w-14 relative mr-3 bg-gray-50 rounded-lg overflow-hidden flex-shrink-0",children:(0,r.jsx)(l.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-800 text-sm",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.description}),(0,r.jsxs)("p",{className:"text-sm text-bobs-red mt-1",children:["+R$ ",e.price.toFixed(2).replace(".",",")]})]})]}),(0,r.jsx)("div",{className:"w-5 h-5 rounded-full border flex items-center justify-center flex-shrink-0 ".concat(c===e.id?"border-bobs-red":"border-gray-300"),children:c===e.id&&(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-bobs-red"})})]},e.id))})]}),t.sauces&&t.sauces.length>0&&(0,r.jsxs)("div",{className:"border-b",children:[(0,r.jsxs)("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-100",children:[(0,r.jsx)("h3",{className:"font-bold text-bobs-red",children:"Molhos"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Escolha seus molhos"})]}),(0,r.jsx)("div",{className:"divide-y divide-gray-100",children:t.sauces.map(e=>{let t=u[e.id]||0;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center pr-3",children:[e.image&&(0,r.jsx)("div",{className:"h-14 w-14 relative mr-3 bg-gray-50 rounded-lg overflow-hidden flex-shrink-0",children:(0,r.jsx)(l.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-800 text-sm",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.description}),(0,r.jsxs)("p",{className:"text-sm text-bobs-red mt-1",children:["+R$ ",e.price.toFixed(2).replace(".",",")]})]})]}),(0,r.jsx)("div",{className:"flex items-center",children:t>0?(0,r.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-full p-1",children:[(0,r.jsx)("button",{className:"w-7 h-7 rounded-full text-bobs-red flex items-center justify-center",onClick:()=>k(e.id),children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),(0,r.jsx)("span",{className:"px-3 font-medium text-sm",children:t}),(0,r.jsx)("button",{className:"w-7 h-7 rounded-full text-bobs-red flex items-center justify-center",onClick:()=>S(e.id),children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})})]}):(0,r.jsx)("button",{onClick:()=>S(e.id),className:"w-7 h-7 rounded-full border border-bobs-red text-bobs-red flex items-center justify-center flex-shrink-0 transition-colors hover:bg-bobs-red hover:text-white",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})})})})]},e.id)})})]})]}),t.addons&&t.addons.length>0&&(0,r.jsxs)("div",{className:"border-b",children:[(0,r.jsxs)("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-100",children:[(0,r.jsx)("h3",{className:"font-bold text-bobs-red",children:"Adicionais"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Itens extras para seu pedido"})]}),(0,r.jsx)("div",{className:"divide-y divide-gray-100",children:t.addons.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>_(e.id),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-800 text-sm",children:e.name}),e.price>0&&(0,r.jsxs)("p",{className:"text-sm text-bobs-red mt-1",children:["+R$ ",e.price.toFixed(2).replace(".",",")]})]}),(0,r.jsx)("div",{className:"w-5 h-5 rounded-full border flex items-center justify-center ".concat(b.includes(e.id)?"border-bobs-red":"border-gray-300"),children:b.includes(e.id)&&(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-bobs-red"})})]},e.id))})]}),(0,r.jsxs)("div",{className:"p-4 border-b",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Observa\xe7\xf5es"}),(0,r.jsx)("textarea",{className:"w-full p-3 border border-gray-200 rounded text-sm focus:outline-none focus:border-bobs-red",placeholder:"Alguma observa\xe7\xe3o para o seu pedido?",rows:2,value:p,onChange:e=>g(e.target.value)})]}),(0,r.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t",children:(0,r.jsx)("div",{className:"container max-w-2xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center border border-gray-200 rounded-md h-[46px] px-3 flex-shrink-0",children:[(0,r.jsx)("button",{type:"button",className:"text-[#ff7f00] text-2xl font-medium w-6",onClick:()=>i>1&&o(i-1),disabled:i<=1,children:"−"}),(0,r.jsx)("div",{className:"mx-4 font-medium",children:i}),(0,r.jsx)("button",{type:"button",className:"text-[#ff7f00] text-2xl font-medium w-6",onClick:()=>o(i+1),children:"+"})]}),(0,r.jsx)("button",{type:"button",className:"flex-1 bg-[#ff7f00] text-white font-medium h-[46px] rounded-md flex items-center justify-between px-4",onClick:()=>{let e=R();console.log("Fun\xe7\xe3o addToCart foi chamada",{editData:s,quantity:i});let r={id:(null==s?void 0:s.itemId)||"".concat(t.id,"-").concat(Date.now()),product:t,quantity:i,selectedExtras:m,selectedSide:c,selectedSauces:u,selectedAddons:b,observation:p,totalPrice:e};if(null==s?void 0:s.itemId)console.log("Atualizando item existente",s.itemId),y(s.itemId,r),w(!0),setTimeout(()=>{window.location.href="/carrinho-novo"},1e3);else{console.log("Adicionando novo item"),N(r),null===localStorage.getItem("bob_cart_items_v2")&&["cartItems","bobsCart"].forEach(e=>{localStorage.removeItem(e)});try{let e=[],t=localStorage.getItem("bob_cart_items_v2");if(t)try{let s=JSON.parse(t);Array.isArray(s)&&(e=s)}catch(e){console.error("Erro ao parsear itens existentes:",e)}e.push(r),localStorage.setItem("bob_cart_items_v2",JSON.stringify(e)),window.dispatchEvent(new CustomEvent("cartUpdated",{detail:{items:e,action:"add"}})),console.log("Item adicionado manualmente ao localStorage",e)}catch(e){console.error("Erro ao salvar item no localStorage:",e)}window.location.href="/carrinho-novo"}},children:s&&j?(0,r.jsxs)("span",{className:"flex items-center justify-center w-full",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Atualizado!"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:s?"Atualizar":"Adicionar"}),(0,r.jsxs)("span",{children:["R$ ",R().toFixed(2).replace(".",",")]})]})})]})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[591,811,500,245,358],()=>t(6053)),_N_E=e.O()}]);