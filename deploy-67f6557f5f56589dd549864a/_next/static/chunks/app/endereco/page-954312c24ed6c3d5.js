(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[472],{405:(e,t,r)=>{Promise.resolve().then(r.bind(r,3520))},3520:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(122),l=r(7362),s=r(5920),o=r(1308);let n=e=>{let{onAddressSelect:t}=e,r=(0,l.useRef)(null),s=(0,l.useRef)(null),n=(0,l.useRef)(null),i=(0,l.useRef)(null),c=(0,l.useRef)(null),[d,u]=(0,l.useState)(!1),[m,f]=(0,l.useState)(null),[x,p]=(0,l.useState)(null),[g,b]=(0,l.useState)(!1),[h,y]=(0,l.useState)(!1),[v,j]=(0,l.useState)(""),[N,w]=(0,l.useState)(""),[O,C]=(0,l.useState)(""),[P,_]=(0,l.useState)(""),[k,S]=(0,l.useState)(!0),z=()=>{navigator.geolocation?(u(!0),f(null),navigator.geolocation.getCurrentPosition(async e=>{let{latitude:t,longitude:a}=e.coords;try{let e=new google.maps.Geocoder,l=await e.geocode({location:{lat:t,lng:a}});if(l.results[0]){let e=l.results[0];E(e),r.current&&(r.current.value=e.formatted_address)}}catch(e){f("N\xe3o foi poss\xedvel obter seu endere\xe7o"),console.error("Geocoding error:",e),b(!0)}finally{u(!1)}},e=>{f("Permita o acesso \xe0 sua localiza\xe7\xe3o"),console.error("Geolocation error:",e),u(!1),b(!0)})):(f("Seu navegador n\xe3o suporta geolocaliza\xe7\xe3o"),b(!0))},E=e=>{var t,r;if(!(null==e?void 0:null===(t=e.geometry)||void 0===t?void 0:t.location)){f("Endere\xe7o n\xe3o encontrado");return}let a={};null===(r=e.address_components)||void 0===r||r.forEach(e=>{a[e.types[0]]=e.long_name});let l={formatted_address:e.formatted_address||"",lat:e.geometry.location.lat(),lng:e.geometry.location.lng(),components:{street:a.route||"",number:a.street_number||"",neighborhood:a.sublocality||"",city:a.administrative_area_level_2||"",state:a.administrative_area_level_1||"",country:a.country||"",postal_code:a.postal_code||""}};i.current&&(i.current.setCenter({lat:l.lat,lng:l.lng}),i.current.setZoom(17),c.current?c.current.setPosition({lat:l.lat,lng:l.lng}):c.current=new google.maps.Marker({map:i.current,position:{lat:l.lat,lng:l.lng},animation:google.maps.Animation.DROP})),p(l),f(null),y(!0)};return(0,l.useEffect)(()=>{if(r.current&&s.current)try{i.current=new google.maps.Map(s.current,{center:{lat:-23.5505,lng:-46.6333},zoom:15,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP}}),n.current=new google.maps.places.Autocomplete(r.current,{componentRestrictions:{country:"BR"},fields:["address_components","formatted_address","geometry"]}),n.current.addListener("place_changed",()=>{var e;let t=null===(e=n.current)||void 0===e?void 0:e.getPlace();t&&E(t)}),k&&setTimeout(()=>{z(),S(!1)},500)}catch(e){f("Erro ao carregar o mapa"),console.error("Google Maps API error:",e)}},[k,t]),(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsxs)("div",{className:"relative mb-3",children:[(0,a.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#ff7f00]",children:(0,a.jsx)(o.vq8,{size:18})}),(0,a.jsx)("input",{ref:r,type:"text",placeholder:"Digite seu endere\xe7o...",className:"w-full pl-10 pr-12 py-3 rounded-lg border border-gray-200 focus:border-[#ff7f00] focus:ring-2 focus:ring-[#ff7f00]/20 transition-all duration-200 text-gray-800 bg-white text-sm"}),(0,a.jsx)("button",{onClick:()=>{b(!0)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-[#ff7f00] hover:text-[#ff9933] transition-colors duration-200",title:"Usar minha localiza\xe7\xe3o atual",children:(0,a.jsx)(o.meu,{size:18})})]}),(0,a.jsx)("div",{ref:s,className:"w-full h-[200px] rounded-lg overflow-hidden shadow-sm border border-gray-100 mb-4"}),x&&!h&&(0,a.jsx)("button",{onClick:()=>y(!0),className:"w-full py-3 bg-[#ff7f00] hover:bg-[#ff9933] text-white font-medium rounded-lg transition-colors duration-200 text-sm",children:"Adicionar detalhes ao endere\xe7o"}),m&&(0,a.jsx)("div",{className:"mt-2 text-red-500 text-xs px-1",children:m}),d&&(0,a.jsxs)("div",{className:"mt-2 text-gray-500 text-xs flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-[#ff7f00] mr-2"}),"Localizando..."]}),g&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Permitir localiza\xe7\xe3o"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Para encontrar seu endere\xe7o automaticamente, precisamos acessar sua localiza\xe7\xe3o. Voc\xea permite?"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>b(!1),className:"flex-1 py-2 px-4 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200 text-sm",children:"Agora n\xe3o"}),(0,a.jsx)("button",{onClick:()=>{b(!1),z()},className:"flex-1 py-2 px-4 bg-[#ff7f00] text-white rounded-lg hover:bg-[#ff9933] transition-colors duration-200 text-sm",children:"Permitir"})]})]})}),h&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Adicionar detalhes"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Adicione informa\xe7\xf5es adicionais para facilitar a entrega."}),(0,a.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Complemento"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:(0,a.jsx)(o.ymh,{size:16})}),(0,a.jsx)("input",{type:"text",value:v,onChange:e=>j(e.target.value),placeholder:"Casa, Apartamento, Bloco...",className:"w-full pl-10 py-2 border border-gray-200 rounded-md text-sm"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apartamento"}),(0,a.jsx)("input",{type:"text",value:O,onChange:e=>C(e.target.value),placeholder:"N\xfamero ou letra do apartamento",className:"w-full py-2 px-3 border border-gray-200 rounded-md text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Andar"}),(0,a.jsx)("input",{type:"text",value:P,onChange:e=>_(e.target.value),placeholder:"Em qual andar voc\xea est\xe1?",className:"w-full py-2 px-3 border border-gray-200 rounded-md text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ponto de refer\xeancia"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:(0,a.jsx)(o.rQ8,{size:16})}),(0,a.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value),placeholder:"Pr\xf3ximo \xe0, em frente \xe0...",className:"w-full pl-10 py-2 border border-gray-200 rounded-md text-sm"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>{x&&(t(x),y(!1))},className:"flex-1 py-2 px-4 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200 text-sm",children:"Pular"}),(0,a.jsx)("button",{onClick:()=>{x&&(t({...x,components:{...x.components,complement:v,reference:N,apartment:O,floor:P}}),y(!1))},className:"flex-1 py-2 px-4 bg-[#ff7f00] text-white rounded-lg hover:bg-[#ff9933] transition-colors duration-200 text-sm",children:"Confirmar"})]})]})})]})};var i=r(2811);function c(){let e=(0,s.useRouter)(),[t,r]=(0,l.useState)(!1),[c,d]=(0,l.useState)(null);return(0,a.jsxs)("main",{className:"min-h-screen bg-white flex flex-col",children:[(0,a.jsx)("header",{className:"bg-[#ff7f00] p-4 flex justify-center items-center shadow-md",children:(0,a.jsx)(i.default,{src:"/images/logo.png",alt:"Bob's Logo",width:100,height:40,className:"w-auto h-8",priority:!0})}),(0,a.jsxs)("div",{className:"flex-1 p-4 max-w-lg mx-auto w-full flex flex-col",children:[(0,a.jsxs)("div",{className:"text-center mb-6 mt-4",children:[(0,a.jsx)("div",{className:"flex justify-center mb-3",children:(0,a.jsx)(o.ZYm,{className:"text-[#ff7f00] text-3xl"})}),(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-800 mb-2",children:"Onde voc\xea est\xe1?"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Digite seu endere\xe7o para ver as ofertas dispon\xedveis"})]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(n,{onAddressSelect:e=>{d(e),r(!0)}})}),(0,a.jsx)("div",{className:"mt-auto text-center text-xs text-gray-400 pb-4",children:(0,a.jsx)("p",{children:"Utilizamos sua localiza\xe7\xe3o apenas para melhorar sua experi\xeancia de entrega"})})]}),t&&c&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Confirmar endere\xe7o"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Confirme se este \xe9 o endere\xe7o correto:"}),(0,a.jsx)("p",{className:"text-gray-800 font-medium text-sm mb-6 break-words",children:c.formatted_address}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>r(!1),className:"flex-1 py-2 px-4 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200 text-sm",children:"Voltar"}),(0,a.jsx)("button",{onClick:()=>{c&&(localStorage.setItem("userAddress",JSON.stringify(c)),e.push("/"))},className:"flex-1 py-2 px-4 bg-[#ff7f00] text-white rounded-lg hover:bg-[#ff9933] transition-colors duration-200 text-sm",children:"Confirmar"})]})]})})]})}},4280:(e,t,r)=>{"use strict";r.d(t,{k5:()=>d});var a=r(7362),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=a.createContext&&a.createContext(l),o=["attr","size","title"];function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var a,l,s;a=e,l=t,s=r[t],(l=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(l))in a?Object.defineProperty(a,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[l]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>a.createElement(u,n({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>a.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:l,size:s,title:i}=e,d=function(e,t){if(null==e)return{};var r,a,l=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}(e,o),u=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&a.createElement("title",null,i),e.children)};return void 0!==s?a.createElement(s.Consumer,null,e=>t(e)):t(l)}},5920:(e,t,r)=>{"use strict";var a=r(4672);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},7975:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return l}});let a=r(7362);function l(e,t){let r=(0,a.useRef)(null),l=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=l.current;t&&(l.current=null,t())}else e&&(r.current=s(e,a)),t&&(l.current=s(t,a))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}},e=>{var t=t=>e(e.s=t);e.O(0,[458,811,500,245,358],()=>t(405)),_N_E=e.O()}]);